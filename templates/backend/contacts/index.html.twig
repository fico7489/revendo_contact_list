{% extends 'backend/base.html.twig' %}

{% block body %}
    <h5 class="card-title">Contacts</h5>

    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Image</th>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">Favorite</th>
            <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for contact in contacts %}
            <tr>
                <td scope="row">{{ contact.getId }}</td>
                <td>
                    {% if contact.getContactProfilePhoto %}
                        <img src="{{ app.request.getBaseURL() }}/uploads/contact-profile-photos/{{ contact.contactProfilePhoto.getPath() }}" alt="" class="img-thumbnail" style="width: 128px;">
                    {% else %}
                        <img src="{{ app.request.getBaseURL() }}/uploads/contact-profile-photos/default/default.png" alt="" class="img-thumbnail" style="width: 128px;">
                    {% endif %}
                </td>
                <td>{{ contact.firstName }} {{ contact.lastName }}</td>
                <td>{{ contact.getEmail }}</td>
                <td>
                    {% if contact.isFavorite %}
                        <i class="bi bi-heart-fill"></i>
                    {% else %}
                        <i class="bi bi-heart"></i>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url('backend.contacts.show', {id : contact.getId}) }}">
                        <i class="bi bi-zoom-in"></i>
                    </a>
                    <a href="{{ url('backend.contacts.edit', {id : contact.getId}) }}">
                        <i class="bi bi-pencil"></i>
                    </a>
                    <a href="#" onclick="response = confirm('Are you sure you want to delete?'); if(response) document.getElementById('delete-{{ contact.getId }}').submit();">
                        <i class="bi bi-x"></i>
                    </a>

                    <form action="{{ url('backend.contacts.delete', {id : contact.getId}) }}" method="post" id="delete-{{ contact.getId }}">
                        <input type="hidden" name="_method" value="DELETE"/>
                    </form>
                </td>
            </tr>
        {% endfor %}

        </tbody>
    </table>
{% endblock %}
